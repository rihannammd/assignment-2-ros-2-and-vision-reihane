#!/usr/bin/env python3
import os
import sys
import wave
import pyaudio
import audioop
from array import array
from struct import pack

import rclpy
from rclpy.node import Node
from std_msgs.msg import String

# Constants
THRESHOLD = 500
CHUNK_SIZE = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
DEFAULT_RATE = 16000
SILENCE_DURATION_LIMIT = 30  # Frames of silence to end recording

class AudioRecorder(Node):
    """
    A ROS2 node for recording audio from the microphone and publishing the file path.
    """

    def __init__(self):
        super().__init__('audio_recorder')
        self.declare_parameter('output_directory', 'recordings')  # Output directory for audio files
        self.output_directory = self.get_parameter('output_directory').get_parameter_value().string_value
   
